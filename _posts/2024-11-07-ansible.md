---
layout: post
author: Bruce Lee
title: Ansible and Terraform SCP
---

# 👨‍🎓 Ansible and Terraform SCP<br/><br/>

## Ansible
- 많은 서버들에 동시에, 동일한 환경을 배포해야 하는 상황에서 Bash 쉘 스크립트는 분명 한계점을 가진다. 앤서블은 이러한 여러 개의 서버를 효율적으로 관리하기 위해 고안된 환경 구성 자동화 도구이다.
- 많은 서버를 같은 템플릿의 인프라로 작성하기 위해 생겨난 개념이 IaC (Infrastructure as a Code) 의 개념이다.

### Ansible vs Terraform ?
> 테라폼은 HashiCorp에서 개발한 인프라스트럭처 as 코드(IaC) 도구로, 클라우드 기반 인프라 리소스를 관리하는데 주로 사용된다.
> 반면, 앤서블은 Red Hat에서 개발한 IT 자동화 도구로, 서버 구성 관리와 애플리케이션 배포 등에 주로 사용된다.

- Terraform : HCL 언어로 구성, 클라우드 인프라 리소스 생성 및 관리, 멀티 클라우드 환경에서의 리소스 관리에 사용
- Ansible : YAML 언어로 구성, 서버 구성 관리, 애플리케이션 배포, 작업 실행에 사용
- 둘다 상태 정보를 관리하기 위해 별도의 인프라가 필요하지 않는다.
- Ansible 의 경우 주로 구성 관리에 맞춰져 있다. 구성 관리란 버전이 지정된 소프트웨어 구성 요소 설치, OS 구성 작업, 네트워크 및 방화벽 구성을 자동화하는 프로세스 등을 말한다.
- Ansible 은 스크립트를 Playbook 이라고 하며 절차적 언어로 특정 일련의 작업을 수행해야 하는 경우 플레이북에서 동일한 작업을 정의하고, 작업은 작성된 순서대로 수행된다.
- 예를 들어, 루트 사용자만 지정된 머신에 서버를 설치하려는 경우 설치 작업 전에 사용자 생성 단계를 작성해야 한다.
- 인벤토리는 앤서블을 이용하여 작업을 진행할 서버의 정보와 작업에 사용할 변수 정보를 저장한다.
- 제어 노드는 앤서블을 실행하는 노드이다. /usr/bin/ansible 이나 /usr/bin/ansible-playbook 명령을 이용하여 제어 노드에서 관리 노드들을 관리한다. 앤서블이 설치 되어 있으면 노트북이나, 서버급 컴퓨터를 제어 노드로 이용할 수 있다.
- 앤서블로 관리하는 서버를 매니지드 노드라고 한다. 매니지드 노드는 호스트라고도 한다. 매니지드 노드에는 앤서블이 설치 되지 않는다.
- 매니지드 노드 목록을 인벤토리라고 한다. 인벤토리 파일은 호스트 파일이라고도 한다. 인벤토리는 각 매니지드 노드에 대한 IP 주소, 호스트 정보, 변수와 같은 정보를 지정할 수 있다.
- Terraform 의 경우 변경 사항이 도입되면 변경 사항 자체의 특성에 따라 실행되는 반면 Ansible 은 최신 버전의 플레이북에 따라 구성 변경 사항을 일관되게 유지하려고 관리한다.
- Ansible 은 안전한 보안과 ACL 기능이 함께 제공되는 반면 오케스트레이션 서비스나 상호 연결된 서비스에는 좋지 않다.

